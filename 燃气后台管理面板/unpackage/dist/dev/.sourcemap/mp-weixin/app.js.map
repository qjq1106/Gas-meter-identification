{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\r\n\timport {\r\n\t\tmapActions,\r\n\t\tmapMutations\r\n\t} from 'vuex'\r\n\timport config from '@/admin.config.js'\r\n\timport {\r\n\t\tversion\r\n\t} from './package.json'\r\n\timport { uniAdminCacheKey } from './store/constants.js'\r\n\timport uploadFileForExtStorage from \"@/js_sdk/ext-storage/uploadFileForExtStorage.js\"\r\n\texport default {\r\n\t\tcreated() {\r\n\t\t\tthis.clear = undefined\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations('app', ['SET_THEME']),\r\n\t\t\t...mapActions({\r\n\t\t\t\tinit: 'app/init'\r\n\t\t\t}),\r\n\t\t\tclearPlatform() {\r\n\t\t\t\tconst keysOfPlatform = uni.getStorageInfoSync().keys.filter(key => key.indexOf('platform') > -1)\r\n\t\t\t\tkeysOfPlatform.length && keysOfPlatform.forEach(key => uni.removeStorageSync(key))\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPageNotFound(msg) {\r\n\t\t\tuni.redirectTo({\r\n\t\t\t\turl: config.error.url\r\n\t\t\t})\r\n\t\t},\r\n\t\tonLaunch: function() {\r\n\t\t\t// #ifdef H5\r\n\t\t\tconsole.log(\r\n\t\t\t\t`%c uni-admin %c v${version} `,\r\n\t\t\t\t'background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff',\r\n\t\t\t\t'background:#007aff ;padding: 1px; border-radius: 0 3px 3px 0;  color: #fff; font-weight: bold;'\r\n\t\t\t)\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef H5\r\n\t\t\t// 此处为强制用户必须登录才能访问其他页面，如果需要部分页面不登录也能访问，需要在此过滤这些页面不执行下面的代码或直接注释掉此代码\r\n\t\t\t// let uni_id_token_expired = uni.getStorageSync(\"uni_id_token_expired\");\r\n\t\t\t// if (!uni_id_token_expired || uni_id_token_expired < Date.now()) {\r\n\t\t\t// \tuni.reLaunch({\r\n\t\t\t// \t\turl: config.login.url\r\n\t\t\t// \t})\r\n\t\t\t// }\r\n\t\t\t// #endif\r\n\t\t\t// 线上示例使用\r\n\t\t\t// console.log('%c uni-app官方团队诚邀优秀前端工程师加盟，一起打造更卓越的uni-app & uniCloud，欢迎投递简历到 hr2013@dcloud.io', 'color: red');\r\n\t\t\tconsole.log('App Launch')\r\n\t\t\tif (this.$uniIdPagesStore.store.hasLogin) {\r\n\t\t\t\tthis.init()\r\n\t\t\t}\r\n\r\n\t\t\t// 登录成功回调\r\n\t\t\tuni.$on('uni-id-pages-login-success', () => {\r\n\t\t\t\tthis.init()\r\n\t\t\t})\r\n\r\n\t\t\t// theme\r\n\t\t\tthis.SET_THEME(uni.getStorageSync(uniAdminCacheKey.theme) || 'default')\r\n\r\n\t\t\t// 设置 uniCloud.uploadFile 默认上传的云存储供应商\r\n\t\t\tuploadFileForExtStorage.init({\r\n\t\t\t\tprovider: \"unicloud\", // provider代表默认上传到哪，可选项 \"unicloud\" 内置存储; \"extStorage\" 扩展存储;\r\n\t\t\t\tdomain: \"cdn.example.com\", //【重要】这里需要改成你开通扩展存储时绑定的自定义域名）\r\n\t\t\t\tfileID2fileURL: true, // 将fileID转成fileURL，方便兼容老项目\r\n\t\t\t\t// 获取上传参数的函数\r\n\t\t\t\tuploadFileOptions: async (event) => {\r\n\t\t\t\t\t// ext-storage-co 是你自己写的云对象，参考代码：https://doc.dcloud.net.cn/uniCloud/ext-storage/dev.html#getuploadfileoptions\r\n\t\t\t\t\tconst uniCloudStorageExtCo = uniCloud.importObject(\"ext-storage-co\");\r\n\t\t\t\t\treturn await uniCloudStorageExtCo.getUploadFileOptions(event);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show')\r\n\t\t\tthis.clear = setInterval(() => this.clearPlatform(), 15 * 60 * 1000)\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t\tthis.clear && clearInterval(this.clear)\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import '@/common/uni.css';\r\n\t@import '@/common/uni-icons.css';\r\n\t@import '@/common/admin-icons.css';\r\n\t@import '@/common/theme.scss';\r\n</style>\r\n","import App from './App'\r\nimport store from './store'\r\nimport plugin from './js_sdk/uni-admin/plugin'\r\nimport messages from './i18n/index.js'\r\n\r\nconst lang = uni.getLocale()\r\n// #ifndef VUE3\r\nimport Vue from 'vue'\r\nimport VueI18n from 'vue-i18n'\r\nVue.config.productionTip = false\r\nVue.use(VueI18n)\r\n// 通过选项创建 VueI18n 实例\r\nconst i18n = new VueI18n({\r\n  locale: lang, // 设置地区\r\n  messages, // 设置地区信息\r\n})\r\nVue.use(plugin)\r\nApp.mpType = 'app'\r\nconst app = new Vue({\r\n  i18n,\r\n  store,\r\n  ...App\r\n})\r\napp.$mount()\r\n// #endif\r\n\r\n// #ifdef VUE3\r\nimport { createSSRApp } from 'vue'\r\nimport { createI18n } from 'vue-i18n'\r\nexport function createApp() {\r\n  const app = createSSRApp(App)\r\n  const i18n = createI18n({\r\n  \tlocale: lang,\r\n  \tmessages\r\n  })\r\n  app.use(i18n)\r\n  app.use(plugin)\r\n  app.use(store)\r\n  return {\r\n    app\r\n  }\r\n}\r\n// #endif\r\n"],"names":["mapMutations","mapActions","uni","config","uniAdminCacheKey","uploadFileForExtStorage","uniCloud","createSSRApp","App","createI18n","messages","plugin","store"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWC,MAAK,YAAU;AAAA,EACd,UAAU;AACT,SAAK,QAAQ;AAAA,EACb;AAAA,EACD,SAAS;AAAA,IACR,GAAGA,2BAAa,OAAO,CAAC,WAAW,CAAC;AAAA,IACpC,GAAGC,yBAAW;AAAA,MACb,MAAM;AAAA,IACP,CAAC;AAAA,IACD,gBAAgB;AACf,YAAM,iBAAiBC,cAAAA,MAAI,mBAAkB,EAAG,KAAK,OAAO,SAAO,IAAI,QAAQ,UAAU,IAAI,EAAE;AAC/F,qBAAe,UAAU,eAAe,QAAQ,SAAOA,oBAAI,kBAAkB,GAAG,CAAC;AAAA,IAClF;AAAA,EACA;AAAA,EACD,eAAe,KAAK;AACnBA,kBAAAA,MAAI,WAAW;AAAA,MACd,KAAKC,aAAAA,OAAO,MAAM;AAAA,KAClB;AAAA,EACD;AAAA,EACD,UAAU,WAAW;AAmBpBD,kBAAAA,MAAA,MAAA,OAAA,iBAAY,YAAY;AACxB,QAAI,KAAK,iBAAiB,MAAM,UAAU;AACzC,WAAK,KAAK;AAAA,IACX;AAGAA,wBAAI,IAAI,8BAA8B,MAAM;AAC3C,WAAK,KAAK;AAAA,KACV;AAGD,SAAK,UAAUA,oBAAI,eAAeE,gBAAAA,iBAAiB,KAAK,KAAK,SAAS;AAGtEC,8CAAAA,wBAAwB,KAAK;AAAA,MAC5B,UAAU;AAAA;AAAA,MACV,QAAQ;AAAA;AAAA,MACR,gBAAgB;AAAA;AAAA;AAAA,MAEhB,mBAAmB,OAAO,UAAU;AAEnC,cAAM,uBAAuBC,cAAAA,GAAS,aAAa,gBAAgB;AACnE,eAAO,MAAM,qBAAqB,qBAAqB,KAAK;AAAA,MAC7D;AAAA,IACD,CAAC;AAAA,EACD;AAAA,EACD,QAAQ,WAAW;AAClBJ,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AACtB,SAAK,QAAQ,YAAY,MAAM,KAAK,iBAAiB,KAAK,KAAK,GAAI;AAAA,EACnE;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AACtB,SAAK,SAAS,cAAc,KAAK,KAAK;AAAA,EACvC;AACD;AC9ED,MAAM,OAAOA,cAAG,MAAC,UAAW;AAwBrB,SAAS,YAAY;AAC1B,QAAM,MAAMK,cAAY,aAACC,SAAG;AAC5B,QAAM,OAAOC,cAAAA,WAAW;AAAA,IACvB,QAAQ;AAAA,IACX,UAAGC,WAAQ;AAAA,EACX,CAAG;AACD,MAAI,IAAI,IAAI;AACZ,MAAI,IAAIC,6BAAM;AACd,MAAI,IAAIC,iBAAK;AACb,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}