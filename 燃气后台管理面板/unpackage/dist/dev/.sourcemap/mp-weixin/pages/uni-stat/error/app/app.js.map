{"version":3,"file":"app.js","sources":["pages/uni-stat/error/app/app.vue","../../../../微信开发者工具/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcdW5pLXN0YXRcZXJyb3JcYXBwXGFwcC52dWU"],"sourcesContent":["<template>\r\n\t<!-- 对应页面： app崩溃 -->\r\n\t<view class=\"fix-top-window\">\r\n\t\t<view class=\"uni-header\">\r\n\t\t\t<uni-stat-breadcrumb class=\"uni-stat-breadcrumb-on-phone\" />\r\n\t\t\t<view class=\"uni-group hide-on-phone\">\r\n\t\t\t\t<view class=\"uni-sub-title\">开发者可以在这里快速查询原生应用最近出现的具体崩溃内容，了解崩溃概况信息，以便快速修复问题</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"uni-container\">\r\n\t\t\t<view class=\"uni-stat--x flex p-1015\">\n\t\t\t\t<view class=\"uni-stat--app-select\">\n\t\t\t\t\t<uni-data-select collection=\"opendb-app-list\" field=\"appid as value, name as text\" orderby=\"text asc\" :defItem=\"1\" label=\"应用选择\" v-model=\"query.appid\" :clear=\"false\" />\r\n\t\t\t\t\t<uni-data-select ref=\"app-versions\" collection=\"opendb-app-versions\" :where=\"versionQuery\" class=\"ml-m\" field=\"_id as value, version as text, uni_platform as label, create_date as date\" format=\"{label} - {text}\" orderby=\"date desc\" label=\"版本选择\" v-model=\"query.version_id\" />\n\t\t\t\t</view>\r\n\t\t\t\t<uni-stat-tabs label=\"平台选择\" type=\"boldLine\" :all=\"false\" mode=\"platform-channel\" v-model=\"query.platform_id\" @change=\"changePlatform\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-stat--x flex\">\r\n\t\t\t\t<uni-stat-tabs label=\"日期选择\" :current=\"currentDateTab\" :yesterday=\"false\" mode=\"date\" @change=\"changeTimeRange\" />\r\n\t\t\t\t<uni-datetime-picker type=\"datetimerange\" :end=\"new Date().getTime()\" v-model=\"query.start_time\"\r\n\t\t\t\t\treturnType=\"timestamp\" :clearIcon=\"false\" class=\"uni-stat-datetime-picker\"\r\n\t\t\t\t\t:class=\"{'uni-stat__actived': currentDateTab < 0 && !!query.start_time.length}\"\r\n\t\t\t\t\t@change=\"useDatetimePicker\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-stat--x\" style=\"padding: 15px 0;\">\r\n\t\t\t\t<uni-stat-panel :items=\"panelData\" class=\"uni-stat-panel\" />\r\n\t\t\t\t<uni-stat-tabs type=\"box\" v-model=\"chartTab\" :tabs=\"chartTabs\" class=\"mb-l\" />\r\n\t\t\t\t<view class=\"uni-charts-box\">\r\n\t\t\t\t\t<qiun-data-charts type=\"area\" :chartData=\"chartData\" :eopts=\"{notMerge:true}\" echartsH5 echartsApp tooltipFormat=\"tooltipCustom\" :errorMessage=\"errorMessage\"/>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"uni-stat--x p-m\">\r\n\t\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t\t<view class=\"uni-stat-card-header\">信息列表</view>\r\n\t\t\t\t\t<view class=\"uni-group\">\r\n\t\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t\t<download-excel class=\"hide-on-phone\" :fields=\"exportExcel.fields\" :data=\"exportExcelData\"\r\n\t\t\t\t\t\t\t:type=\"exportExcel.type\" :name=\"exportExcel.filename\">\r\n\t\t\t\t\t\t\t<button class=\"uni-button\" type=\"primary\" size=\"mini\">导出 Excel</button>\r\n\t\t\t\t\t\t</download-excel>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<unicloud-db ref=\"udb\" :collection=\"collectionList\"\r\n\t\t\t\t\tfield=\"appid,version,platform,channel,sdk_version,device_id,device_net,device_os,device_os_version,device_vendor,device_model,device_is_root,device_os_name,device_batt_level,device_batt_temp,device_memory_use_size,device_memory_total_size,device_disk_use_size,device_disk_total_size,device_abis,app_count,app_use_memory_size,app_webview_count,app_use_duration,app_run_fore,package_name,package_version,page_url,error_msg,create_time\"\r\n\t\t\t\t\t:where=\"where\" page-data=\"replace\" :orderby=\"orderby\" :getcount=\"true\" :page-size=\"options.pageSize\"\r\n\t\t\t\t\t:page-current=\"options.pageCurrent\" loadtime=\"manual\"\r\n\t\t\t\t\tv-slot:default=\"{data,pagination,loading,error,options}\" :options=\"options\" @load=\"onqueryload\">\r\n\t\t\t\t\t<uni-table ref=\"table\" :loading=\"loading\" border stripe :emptyText=\"errorMessage || $t('common.empty')\"\r\n\t\t\t\t\t\tstyle=\"overflow-y: scroll;\">\r\n\t\t\t\t\t\t<uni-tr>\r\n\t\t\t\t\t\t\t<block v-for=\"(mapper, index) in fieldsMap\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<uni-th v-if=\"mapper.title\" :key=\"index\" align=\"center\"\r\n\t\t\t\t\t\t\t\t\t:style=\"{'minWidth':`${mapper.title.length * 15 + 80}px`}\">\r\n\t\t\t\t\t\t\t\t\t<!-- #ifdef MP -->\r\n\t\t\t\t\t\t\t\t\t{{mapper.title}}\r\n\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t\t<!-- #ifndef MP -->\r\n\t\t\t\t\t\t\t\t\t<uni-tooltip>\r\n\t\t\t\t\t\t\t\t\t\t{{mapper.title}}\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons v-if=\"mapper.tooltip\" type=\"help\" color=\"#666\" />\r\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"mapper.tooltip\" v-slot:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"uni-stat-tooltip-s\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{mapper.tooltip}}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t</uni-tooltip>\r\n\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t</uni-th>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t</uni-tr>\r\n\t\t\t\t\t\t<uni-tr v-for=\"(item ,i) in tableData\" :key=\"i\">\r\n\t\t\t\t\t\t\t<block v-for=\"(mapper, index) in fieldsMap\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<uni-td v-if=\"mapper.field === 'error_msg'\" :key=\"mapper.field\" align=\"left\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"min-width: 500px;\">\r\n\t\t\t\t\t\t\t\t\t<!-- #ifdef MP -->\r\n\t\t\t\t\t\t\t\t\t{{item.error_msg ? item.error_msg.substring(0, 100) + '...' : '-'}}\r\n\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t\t<!-- #ifndef MP -->\r\n\t\t\t\t\t\t\t\t\t<uni-tooltip>\r\n\t\t\t\t\t\t\t\t\t\t{{item.error_msg ? item.error_msg.substring(0, 100) + '...' : ''}}\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons v-if=\"item.error_msg\" type=\"help\" color=\"#666\" />\r\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"item.error_msg\" v-slot:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"uni-stat-tooltip-l\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{item.error_msg}}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t</uni-tooltip>\r\n\t\t\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t\t\t\t<uni-td v-else-if=\"mapper.field === 'create_time'\" :key=\"mapper.field\" align=\"center\">\r\n\t\t\t\t\t\t\t\t\t<uni-dateformat :threshold=\"[0, 0]\" :date=\"item.create_time\"></uni-dateformat>\r\n\t\t\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t\t\t\t<uni-td v-else :key=\"mapper.field\" align=\"center\">\r\n\t\t\t\t\t\t\t\t\t{{item[mapper.field] !== undefined ? item[mapper.field] : '-'}}\r\n\t\t\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t</uni-tr>\r\n\t\t\t\t\t</uni-table>\r\n\t\t\t\t\t<view class=\"uni-pagination-box\">\r\n\t\t\t\t\t\t<uni-pagination show-icon :page-size=\"pagination.size\" v-model=\"pagination.current\"\r\n\t\t\t\t\t\t\t:total=\"pagination.count\" @change=\"onPageChanged\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</unicloud-db>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- #ifndef H5 -->\r\n\t\t<fix-window />\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapfields,\r\n\t\tstringifyQuery,\r\n\t\tgetTimeOfSomeDayAgo,\r\n\t\tdivision,\r\n\t\tformat,\r\n\t\tformatDate,\r\n\t\tparseDateTime,\r\n\t\tdebounce,\r\n\t\tgetAllDateCN\r\n\t} from '@/js_sdk/uni-stat/util.js'\r\n\timport {\r\n\t\tfieldsMap,\r\n\t} from './fieldsMap.js'\r\n\r\n\tconst panelOption = [{\r\n\t\ttitle: '崩溃总数',\r\n\t\tfield: 'count',\r\n\t\tvalue: 0,\r\n\t\tformatter: ',',\r\n\t\ttooltip: '指原生应用在某个时间段内出现崩溃的总数'\r\n\t}, {\r\n\t\ttitle: '崩溃率',\r\n\t\tfield: 'count/app_launch_count',\r\n\t\tcomputed: 'count/app_launch_count',\r\n\t\tformatter: '%',\r\n\t\tvalue: 0,\r\n\t\ttooltip: '时间范围内的总崩溃数/原生应用启动次数，如果小于0.01%，默认显示为0'\r\n\t}]\r\n\r\n\timport {\r\n\t\tenumConverter,\r\n\t\tfilterToWhere\r\n\t} from '@/js_sdk/validator/uni-stat-app-crash-logs.js';\r\n\r\n\tconst db = uniCloud.database()\r\n\t// 表查询配置\r\n\tconst dbOrderBy = 'create_time desc' // 排序字段\r\n\tconst dbSearchFields = [] // 模糊搜索字段，支持模糊搜索的字段列表。联表查询格式: 主表字段名.副表字段名，例如用户表关联角色表 role.role_name\r\n\t// 分页配置\r\n\tconst pageSize = 20\r\n\tconst pageCurrent = 1\r\n\r\n\tconst orderByMapping = {\r\n\t\t\"ascending\": \"asc\",\r\n\t\t\"descending\": \"desc\"\r\n\t}\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfieldsMap,\r\n\t\t\t\t//todo：要与schema 生成页面一起工作，stringifyQuery 需要与 schema 查询逻辑相容\r\n\t\t\t\tquery: {\r\n\t\t\t\t\ttype: \"crash\",\r\n\t\t\t\t\tdimension: \"day\",\r\n\t\t\t\t\tappid: \"\",\r\n\t\t\t\t\tplatform_id: '',\r\n\t\t\t\t\tuni_platform: '',\r\n\t\t\t\t\tversion_id: '',\r\n\t\t\t\t\tstart_time: [],\r\n\t\t\t\t},\r\n\t\t\t\tloading: false,\r\n\t\t\t\tpopupLoading: false,\r\n\t\t\t\tcurrentDateTab: 0,\r\n\t\t\t\t// currentChartTab: ,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tpopupTableData: [],\r\n\t\t\t\tpanelData: JSON.parse(JSON.stringify(panelOption)),\r\n\t\t\t\tchartData: {},\r\n\t\t\t\tchartTab: 'errorCount',\r\n\t\t\t\tchartTabs: [{\r\n\t\t\t\t\t_id: 'errorCount',\r\n\t\t\t\t\tname: '崩溃次数'\r\n\t\t\t\t}, {\r\n\t\t\t\t\t_id: 'errorRate',\r\n\t\t\t\t\tname: '崩溃率'\r\n\t\t\t\t}],\r\n\r\n\t\t\t\tcollectionList: \"uni-stat-app-crash-logs\",\r\n\t\t\t\tschemaQuery: '',\r\n\t\t\t\twhere: this.tableData,\r\n\t\t\t\torderby: dbOrderBy,\r\n\t\t\t\torderByFieldName: \"\",\r\n\t\t\t\tselectedIndexs: [],\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tpageCurrent: 1, // 当前页\r\n\t\t\t\t\ttotal: 0, // 数据总量\r\n\t\t\t\t\tpageSizeIndex: 0, // 与 pageSizeRange 一起计算得出 pageSize\r\n\t\t\t\t\tpageSizeRange: [10, 20, 50, 100],\r\n\t\t\t\t\tpageSize,\r\n\t\t\t\t\tpageCurrent,\r\n\t\t\t\t\tfilterData: {},\r\n\t\t\t\t\t...enumConverter\r\n\t\t\t\t},\r\n\t\t\t\terrorMessage: \"\",\r\n\t\t\t\texportExcel: {\r\n\t\t\t\t\t\"filename\": \"uni-stat-app-crash-logs.xls\",\r\n\t\t\t\t\t\"type\": \"xls\",\r\n\t\t\t\t\t\"fields\": {\r\n\t\t\t\t\t\t\"appid\": \"appid\",\r\n\t\t\t\t\t\t\"version\": \"version\",\r\n\t\t\t\t\t\t\"platform\": \"platform\",\r\n\t\t\t\t\t\t\"channel\": \"channel\",\r\n\t\t\t\t\t\t\"sdk_version\": \"sdk_version\",\r\n\t\t\t\t\t\t\"device_id\": \"device_id\",\r\n\t\t\t\t\t\t\"device_net\": \"device_net\",\r\n\t\t\t\t\t\t\"device_os\": \"device_os\",\r\n\t\t\t\t\t\t\"device_os_version\": \"device_os_version\",\r\n\t\t\t\t\t\t\"device_vendor\": \"device_vendor\",\r\n\t\t\t\t\t\t\"device_model\": \"device_model\",\r\n\t\t\t\t\t\t\"device_is_root\": \"device_is_root\",\r\n\t\t\t\t\t\t\"device_os_name\": \"device_os_name\",\r\n\t\t\t\t\t\t\"device_batt_level\": \"device_batt_level\",\r\n\t\t\t\t\t\t\"device_batt_temp\": \"device_batt_temp\",\r\n\t\t\t\t\t\t\"device_memory_use_size\": \"device_memory_use_size\",\r\n\t\t\t\t\t\t\"device_memory_total_size\": \"device_memory_total_size\",\r\n\t\t\t\t\t\t\"device_disk_use_size\": \"device_disk_use_size\",\r\n\t\t\t\t\t\t\"device_disk_total_size\": \"device_disk_total_size\",\r\n\t\t\t\t\t\t\"device_abis\": \"device_abis\",\r\n\t\t\t\t\t\t\"app_count\": \"app_count\",\r\n\t\t\t\t\t\t\"app_use_memory_size\": \"app_use_memory_size\",\r\n\t\t\t\t\t\t\"app_webview_count\": \"app_webview_count\",\r\n\t\t\t\t\t\t\"app_use_duration\": \"app_use_duration\",\r\n\t\t\t\t\t\t\"app_run_fore\": \"app_run_fore\",\r\n\t\t\t\t\t\t\"package_name\": \"package_name\",\r\n\t\t\t\t\t\t\"package_version\": \"package_version\",\r\n\t\t\t\t\t\t\"page_url\": \"page_url\",\r\n\t\t\t\t\t\t\"error_msg\": \"error_msg\",\r\n\t\t\t\t\t\t\"create_time\": \"create_time\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\texportExcelData: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tqueryStr() {\r\n\t\t\t\treturn stringifyQuery(this.query)\r\n\t\t\t},\r\n\t\t\ttableQuery() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tappid,\r\n\t\t\t\t\tplatform_id,\r\n\t\t\t\t\tversion_id,\r\n\t\t\t\t\tstart_time\r\n\t\t\t\t} = this.query\r\n\r\n\t\t\t\t// 从本地存储中取到数据做过滤\r\n\t\t\t\tconst platform = this.getPlatform(platform_id);\r\n\t\t\t\tconst version = this.getVersion(version_id);\r\n\r\n\t\t\t\tconst query = stringifyQuery({\r\n\t\t\t\t\tappid,\r\n\t\t\t\t\tcreate_time: start_time,\r\n\t\t\t\t\tplatform: platform,\r\n\t\t\t\t\tversion: version\r\n\t\t\t\t})\r\n\t\t\t\t//console.log('query: ', query)\r\n\t\t\t\treturn query\r\n\t\t\t},\r\n\t\t\tversionQuery() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tappid,\r\n\t\t\t\t\tuni_platform\r\n\t\t\t\t} = this.query\r\n\t\t\t\tconst query = stringifyQuery({\r\n\t\t\t\t\tappid,\r\n\t\t\t\t\tuni_platform,\r\n\t\t\t\t\ttype: 'native_app'\r\n\t\t\t\t})\r\n\t\t\t\t//console.log('query: ', query)\r\n\t\t\t\treturn query\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.debounceGet = debounce(() => {\r\n\t\t\t\tthis.getAllData(this.queryStr)\r\n\t\t\t\tthis.where = this.tableQuery\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$refs.udb && this.$refs.udb.loadData()\r\n\t\t\t\t}, 200)\r\n\t\t\t},300);\r\n\t\t\tthis.debounceGet();\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tquery: {\r\n\t\t\t\tdeep: true,\r\n\t\t\t\thandler(val) {\r\n\t\t\t\t\tthis.options.pageCurrent = 1 // 重置分页\r\n\t\t\t\t\tthis.debounceGet()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchartTab(val) {\r\n\t\t\t\tthis.getChartData(this.queryStr)\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis._filter = {}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonqueryload(data) {\r\n\t\t\t\tthis.exportExcelData = data\r\n\t\t\t\tthis.tableData = data\r\n\t\t\t},\r\n\t\t\tgetWhere() {\r\n\t\t\t\tconst query = this.schemaQuery.trim()\r\n\t\t\t\tif (!query) {\r\n\t\t\t\t\treturn ''\r\n\t\t\t\t}\r\n\t\t\t\tconst queryRe = new RegExp(query, 'i')\r\n\t\t\t\treturn dbSearchFields.map(name => queryRe + '.test(' + name + ')').join(' || ')\r\n\t\t\t},\r\n\t\t\tloadData(clear = true) {\r\n\t\t\t\tthis.$refs.udb.loadData({\r\n\t\t\t\t\tclear\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonPageChanged(e) {\r\n\t\t\t\tthis.selectedIndexs.length = 0\r\n\t\t\t\tthis.$refs.table.clearSelection()\r\n\t\t\t\tthis.$refs.udb.loadData({\r\n\t\t\t\t\tcurrent: e.current\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsortChange(e, name) {\r\n\t\t\t\tthis.orderByFieldName = name;\r\n\t\t\t\tif (e.order) {\r\n\t\t\t\t\tthis.orderby = name + ' ' + orderByMapping[e.order]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.orderby = ''\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs.table.clearSelection()\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$refs.udb.loadData()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfilterChange(e, name) {\r\n\t\t\t\tthis._filter[name] = {\r\n\t\t\t\t\ttype: e.filterType,\r\n\t\t\t\t\tvalue: e.filter\r\n\t\t\t\t}\r\n\t\t\t\tlet newWhere = filterToWhere(this._filter, db.command)\r\n\t\t\t\tif (Object.keys(newWhere).length) {\r\n\t\t\t\t\tthis.where = newWhere\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.where = ''\r\n\t\t\t\t\t// this.where = this.tableQuery\r\n\t\t\t\t}\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$refs.udb.loadData()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tuseDatetimePicker() {\r\n\t\t\t\tthis.currentDateTab = -1\r\n\t\t\t},\r\n\t\t\tchangePlatform(id, index, name, item) {\r\n\t\t\t\tthis.query.version_id = 0\r\n\t\t\t\tthis.query.uni_platform = item.code\r\n\t\t\t},\r\n\t\t\tchangeTimeRange(id, index) {\r\n\t\t\t\tthis.currentDateTab = index\r\n\t\t\t\tconst start = getTimeOfSomeDayAgo(id),\r\n\t\t\t\t\tend = getTimeOfSomeDayAgo(0) - 1\r\n\t\t\t\tthis.query.start_time = [start, end]\r\n\t\t\t},\r\n\r\n\t\t\tgetPlatform(platform_id){\r\n\t\t\t\tconst statTabsData = uni.getStorageSync('uni-admin-statTabsData');\r\n\t\t\t\tconst platforms = statTabsData[\"platform-channel\"];\r\n\t\t\t\tconst p = Array.isArray(platforms) && platforms.find(p => p._id === platform_id)\r\n\t\t\t\treturn p && p.code || '';\r\n\t\t\t},\r\n\t\t\tgetVersion(version_id){\r\n\t\t\t\tlet versions = [];\r\n\t\t\t\tif (this.$refs[\"app-versions\"] && typeof this.$refs[\"app-versions\"].getLoadData === \"function\") {\r\n\t\t\t\t\tversions = this.$refs[\"app-versions\"].getLoadData();\r\n\t\t\t\t}\r\n\t\t\t\tconst v = Array.isArray(versions) && versions.find(v => v._id === version_id);\r\n\t\t\t\treturn v && v.text || '';\r\n\t\t\t},\r\n\r\n\t\t\tgetAllData(query) {\r\n\t\t\t\tif (query.indexOf(\"appid\") === -1) {\r\n\t\t\t\t\tthis.errorMessage = \"请先选择应用\";\r\n\t\t\t\t\treturn; // 如果appid为空，则不进行查询\r\n\t\t\t\t}\r\n\t\t\t\tthis.errorMessage = \"\";\r\n\t\t\t\tthis.getPanelData(query)\r\n\t\t\t\tthis.getChartData(query)\r\n\t\t\t},\r\n\r\n\t\t\tgetPanelData(query) {\r\n\t\t\t\tlet querystr = stringifyQuery(this.query, false, ['uni_platform'])\r\n\t\t\t\tconst db = uniCloud.database()\r\n\t\t\t\tdb.collection('uni-stat-error-result')\r\n\t\t\t\t\t.where(querystr)\r\n\t\t\t\t\t.field('count as temp_count, app_launch_count as temp_app_launch_count, appid')\r\n\t\t\t\t\t.groupBy('appid')\r\n\t\t\t\t\t.groupField('sum(temp_count) as count, sum(temp_app_launch_count) as app_launch_count')\r\n\t\t\t\t\t.get({\r\n\t\t\t\t\t\tgetCount: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tcount,\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t} = res.result\r\n\t\t\t\t\t\tconst item = res.result.data[0] || {count:0,app_launch_count:0}\r\n\t\t\t\t\t\t// this.panelData = []\r\n\t\t\t\t\t\tlet queryTemp = Object.assign({}, this.query)\r\n\t\t\t\t\t\tdelete queryTemp.type\r\n\t\t\t\t\t\tthis.getTotalLaunch(stringifyQuery(queryTemp, false, ['uni_platform'])).then(res => {\r\n\t\t\t\t\t\t\tconst total = res.result.data[0]\r\n\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\tlet launch_count = total && total.total_app_launch_count\r\n\t\t\t\t\t\t\t\titem.app_launch_count = launch_count\r\n\t\t\t\t\t\t\t\tthis.panelData = mapfields(panelOption, item)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetTotalLaunch(query) {\r\n\t\t\t\tconst db = uniCloud.database()\r\n\t\t\t\treturn db.collection('uni-stat-result')\r\n\t\t\t\t\t.where(query)\r\n\t\t\t\t\t.groupBy('appid')\r\n\t\t\t\t\t.groupField('sum(app_launch_count) as total_app_launch_count')\r\n\t\t\t\t\t.get()\r\n\t\t\t},\r\n\t\t\tgetChartData(query, field = 'day_count') {\r\n\t\t\t\tlet querystr = stringifyQuery(this.query, false, ['uni_platform'])\r\n\t\t\t\tthis.chartData = {}\r\n\t\t\t\tconst {\r\n\t\t\t\t\tpageCurrent\r\n\t\t\t\t} = this.options\r\n\t\t\t\tconst db = uniCloud.database()\r\n\t\t\t\tconst [start_time, end_tiem] = this.query.start_time\r\n\t\t\t\t// 时间补全\r\n\t\t\t\tconst timeAll = getAllDateCN(new Date(start_time), new Date(end_tiem))\r\n\r\n\t\t\t\tdb.collection('uni-stat-error-result')\r\n\t\t\t\t\t.where(querystr)\r\n\t\t\t\t\t.field('count as temp_count, app_launch_count as temp_app_launch_count, start_time')\r\n\t\t\t\t\t.groupBy('start_time')\r\n\t\t\t\t\t.groupField('sum(temp_count) as count, sum(temp_app_launch_count) as app_launch_count')\r\n\t\t\t\t\t.orderBy('start_time', 'asc')\r\n\t\t\t\t\t.get({\r\n\t\t\t\t\t\tgetCount: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tcount,\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t} = res.result\r\n\t\t\t\t\t\tlet dataAll = []\r\n\t\t\t\t\t\ttimeAll.forEach(v => {\r\n\t\t\t\t\t\t\tlet item = data.find(item => item.start_time === v)\r\n\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\tdataAll.push(item)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdataAll.push({\r\n\t\t\t\t\t\t\t\t\tapp_launch_count: 0,\r\n\t\t\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\t\t\tstart_time: v\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\tconst options = {\r\n\t\t\t\t\t\t\tcategories: [],\r\n\t\t\t\t\t\t\tseries: [{\r\n\t\t\t\t\t\t\t\tname: '暂无数据',\r\n\t\t\t\t\t\t\t\tdata: []\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.chartTab === 'errorCount') {\r\n\t\t\t\t\t\t\tconst countLine = options.series[0] = {\r\n\t\t\t\t\t\t\t\tname: '崩溃次数',\r\n\t\t\t\t\t\t\t\tdata: []\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst xAxis = options.categories\r\n\t\t\t\t\t\t\tfor (const item of dataAll) {\r\n\t\t\t\t\t\t\t\tlet date = item.start_time\r\n\t\t\t\t\t\t\t\tconst x = formatDate(date, 'day')\r\n\t\t\t\t\t\t\t\tconst countY = item.count\r\n\t\t\t\t\t\t\t\txAxis.push(x)\r\n\t\t\t\t\t\t\t\tcountLine.data.push(countY)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.chartData = options\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst rateLine = options.series[0] = {\r\n\t\t\t\t\t\t\t\tname: '崩溃率(%)',\r\n\t\t\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\t\t\t\tcolor: '#EE6666',\r\n\t\t\t\t\t\t\t\t\twidth: 1,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\t\t\t\tborderWidth: 1,\r\n\t\t\t\t\t\t\t\t\tborderColor: '#EE6666',\r\n\t\t\t\t\t\t\t\t\tcolor: '#EE6666'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tareaStyle: {\r\n\t\t\t\t\t\t\t\t\tcolor: {\r\n\t\t\t\t\t\t\t\t\t\tcolorStops: [{\r\n\t\t\t\t\t\t\t\t\t\t\toffset: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: '#EE6666', // 0% 处的颜色\r\n\t\t\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\t\t\toffset: 1,\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: '#FFFFFF' // 100% 处的颜色\r\n\t\t\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst xAxis = options.categories\r\n\t\t\t\t\t\t\tfor (const item of dataAll) {\r\n\t\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\t\tcount,\r\n\t\t\t\t\t\t\t\t\tapp_launch_count\r\n\t\t\t\t\t\t\t\t} = item\r\n\t\t\t\t\t\t\t\tlet date = item.start_time\r\n\t\t\t\t\t\t\t\tconst x = formatDate(date, 'day')\r\n\t\t\t\t\t\t\t\txAxis.push(x)\r\n\t\t\t\t\t\t\t\tlet y = count / app_launch_count\r\n\t\t\t\t\t\t\t\ty = !y ? 0 : y.toFixed(2)\r\n\t\t\t\t\t\t\t\trateLine.data.push(y)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.chartData = options\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).finally(() => {})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.flex-between {\r\n\t\tmargin-bottom: 10px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.uni-stat-panel {\r\n\t\tbox-shadow: unset;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t\tpadding: 0;\r\n\t\tmargin: 0 15px;\r\n\t}\r\n\r\n\t.uni-stat-tooltip-s {\r\n\t\twidth: 160px;\r\n\t\twhite-space: normal;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'E:/testProjects/WeChatProjects/testProject-2/燃气后台管理面板/pages/uni-stat/error/app/app.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","fieldsMap","enumConverter","stringifyQuery","debounce","filterToWhere","getTimeOfSomeDayAgo","uni","p","v","db","res","mapfields","getAllDateCN","item","formatDate","count"],"mappings":"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"}