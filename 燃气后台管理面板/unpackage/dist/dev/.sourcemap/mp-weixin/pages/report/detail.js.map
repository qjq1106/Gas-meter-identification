{"version":3,"file":"detail.js","sources":["pages/report/detail.vue","../../../../微信开发者工具/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVwb3J0L2RldGFpbC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"uni-container\">\r\n\t\t<view v-if=\"loading\" class=\"loading-container\">\r\n\t\t\t<uni-load-more status=\"loading\" />\r\n\t\t</view>\r\n\t\t\r\n\t\t<view v-else-if=\"reportData\" class=\"detail-container\">\r\n\t\t\t<!-- 基础信息卡片 -->\r\n\t\t\t<uni-card title=\"基础信息\" :is-shadow=\"true\">\r\n\t\t\t\t<view class=\"info-grid\">\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">当前读数：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.reading }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">上次读数：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.lastReading || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">整数部分：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.integerPart || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">小数部分：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.decimalPart || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-card>\r\n\t\t\t\r\n\t\t\t<!-- 位置信息卡片 -->\r\n\t\t\t<uni-card title=\"位置信息\" :is-shadow=\"true\">\r\n\t\t\t\t<view class=\"info-grid\">\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">详细地址：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.address }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">楼栋号：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.building || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-card>\r\n\t\t\t\r\n\t\t\t<!-- 时间信息卡片 -->\r\n\t\t\t<uni-card title=\"时间信息\" :is-shadow=\"true\">\r\n\t\t\t\t<view class=\"info-grid\">\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">抄表日期：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.date }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">抄表时间：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.time || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">创建时间：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ formatTime(reportData.createTime) }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">更新时间：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ formatTime(reportData.updateTime) }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-card>\r\n\t\t\t\r\n\t\t\t<!-- 状态信息卡片 -->\r\n\t\t\t<uni-card title=\"状态信息\" :is-shadow=\"true\">\r\n\t\t\t\t<view class=\"info-grid\">\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">报告状态：</text>\r\n\t\t\t\t\t\t<uni-tag :text=\"reportData.status\" :type=\"getStatusType(reportData.status)\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item full-width\" v-if=\"reportData.remark\">\r\n\t\t\t\t\t\t<text class=\"label\">备注信息：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.remark }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-card>\r\n\t\t\t\r\n\t\t\t<!-- 图片信息卡片 -->\r\n\t\t\t<uni-card title=\"燃气表图片\" :is-shadow=\"true\">\r\n\t\t\t\t<view class=\"image-container\" v-if=\"reportData.imageUrl && reportData.imageUrl.trim()\">\r\n\t\t\t\t\t<image :src=\"reportData.imageUrl\" mode=\"aspectFit\" @click=\"previewImage\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else class=\"no-image\">\r\n\t\t\t\t\t<text>暂无图片</text>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-card>\r\n\t\t\t\r\n\t\t\t<!-- OCR识别结果卡片 -->\r\n\t\t\t<uni-card title=\"OCR识别结果\" :is-shadow=\"true\" v-if=\"reportData.ocrResult\">\r\n\t\t\t\t<view class=\"ocr-result\">\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">识别状态：</text>\r\n\t\t\t\t\t\t<uni-tag :text=\"reportData.ocrResult.success ? '成功' : '失败'\" \r\n\t\t\t\t\t\t\t:type=\"reportData.ocrResult.success ? 'success' : 'error'\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">请求ID：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.ocrResult.request_id || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">整数识别：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.ocrResult.integer || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-item\">\r\n\t\t\t\t\t\t<text class=\"label\">小数识别：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ reportData.ocrResult.decimal || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-card>\r\n\t\t\t\r\n\t\t\t<!-- 操作按钮 -->\r\n\t\t\t<view class=\"button-group\">\r\n\t\t\t\t<button class=\"uni-button uni-button--default\" @click=\"goBack\">返回</button>\r\n\t\t\t\t<button class=\"uni-button uni-button--primary\" @click=\"editRecord\">编辑</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view v-else class=\"empty-container\">\r\n\t\t\t<text>暂无数据</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nconst db = uniCloud.database()\r\nconst dbCollectionName = 'report'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\treportData: null,\r\n\t\t\tloading: true,\r\n\t\t\trecordId: ''\r\n\t\t}\r\n\t},\r\n\tasync onLoad(options) {\r\n\t\tif (options.id) {\r\n\t\t\tthis.recordId = options.id\r\n\t\t\tawait this.loadData()\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tasync loadData() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tconst res = await db.collection(dbCollectionName).doc(this.recordId).get()\r\n\t\t\t\tif (res.data.data && res.data.data.length > 0) {\r\n\t\t\t\t\tthis.reportData = res.data.data[0]\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tuni.$u.toast('加载数据失败')\r\n\t\t\t\tconsole.error(err)\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetStatusType(status) {\r\n\t\t\tconst statusMap = {\r\n\t\t\t\t'已识别': 'primary',\r\n\t\t\t\t'已确认': 'success', \r\n\t\t\t\t'待审核': 'warning',\r\n\t\t\t\t'异常': 'error'\r\n\t\t\t}\r\n\t\t\treturn statusMap[status] || 'default'\r\n\t\t},\r\n\t\tformatTime(timestamp) {\r\n\t\t\tif (!timestamp) return '-'\r\n\t\t\tconst date = new Date(timestamp)\r\n\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\r\n\t\t},\r\n\t\tpreviewImage() {\r\n\t\t\tif (this.reportData.imageUrl && this.reportData.imageUrl.trim()) {\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: [this.reportData.imageUrl],\r\n\t\t\t\t\tcurrent: 0\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\teditRecord() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `./edit?id=${this.recordId}`\r\n\t\t\t})\r\n\t\t},\r\n\t\tgoBack() {\r\n\t\t\tuni.navigateBack()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.uni-container {\r\n\tpadding: 15px;\r\n\tbackground-color: #f5f5f5;\r\n}\r\n\r\n.loading-container, .empty-container {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\theight: 200px;\r\n}\r\n\r\n.detail-container {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 15px;\r\n}\r\n\r\n.info-grid {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 12px;\r\n}\r\n\r\n.info-item {\r\n\tdisplay: flex;\r\n\talign-items: flex-start;\r\n\tgap: 10px;\r\n}\r\n\r\n.info-item.full-width {\r\n\tflex-direction: column;\r\n\tgap: 5px;\r\n}\r\n\r\n.label {\r\n\tfont-weight: bold;\r\n\tcolor: #666;\r\n\tmin-width: 80px;\r\n}\r\n\r\n.value {\r\n\tcolor: #333;\r\n\tflex: 1;\r\n\tword-break: break-all;\r\n}\r\n\r\n.image-container {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tmin-height: 200px;\r\n}\r\n\r\n.image-container image {\r\n\tmax-width: 100%;\r\n\tmax-height: 300px;\r\n\tborder-radius: 8px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.no-image {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\theight: 100px;\r\n\tcolor: #999;\r\n\tbackground-color: #f9f9f9;\r\n\tborder-radius: 8px;\r\n}\r\n\r\n.ocr-result {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 12px;\r\n}\r\n\r\n.button-group {\r\n\tmargin-top: 20px;\r\n\tdisplay: flex;\r\n\tgap: 15px;\r\n}\r\n\r\n.uni-button {\r\n\tflex: 1;\r\n}\r\n</style>","import MiniProgramPage from 'E:/testProjects/WeChatProjects/testProject-2/燃气后台管理面板/pages/report/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni"],"mappings":";;AA8HA,MAAM,KAAKA,cAAQ,GAAC,SAAS;AAC7B,MAAM,mBAAmB;AAEzB,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,EACA;AAAA,EACD,MAAM,OAAO,SAAS;AACrB,QAAI,QAAQ,IAAI;AACf,WAAK,WAAW,QAAQ;AACxB,YAAM,KAAK,SAAS;AAAA,IACrB;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,MAAM,WAAW;AAChB,UAAI;AACH,aAAK,UAAU;AACf,cAAM,MAAM,MAAM,GAAG,WAAW,gBAAgB,EAAE,IAAI,KAAK,QAAQ,EAAE,IAAI;AACzE,YAAI,IAAI,KAAK,QAAQ,IAAI,KAAK,KAAK,SAAS,GAAG;AAC9C,eAAK,aAAa,IAAI,KAAK,KAAK,CAAC;AAAA,QAClC;AAAA,MACC,SAAO,KAAK;AACbC,4BAAI,GAAG,MAAM,QAAQ;AACrBA,sBAAAA,MAAA,MAAA,SAAA,kCAAc,GAAG;AAAA,MAClB,UAAU;AACT,aAAK,UAAU;AAAA,MAChB;AAAA,IACA;AAAA,IACD,cAAc,QAAQ;AACrB,YAAM,YAAY;AAAA,QACjB,OAAO;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,MACP;AACA,aAAO,UAAU,MAAM,KAAK;AAAA,IAC5B;AAAA,IACD,WAAW,WAAW;AACrB,UAAI,CAAC;AAAW,eAAO;AACvB,YAAM,OAAO,IAAI,KAAK,SAAS;AAC/B,aAAO,GAAG,KAAK,YAAa,CAAA,IAAI,OAAO,KAAK,aAAa,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAO,KAAK,UAAU,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAO,KAAK,WAAU,CAAE,EAAE,SAAS,GAAG,GAAG,CAAC;AAAA,IACjN;AAAA,IACD,eAAe;AACd,UAAI,KAAK,WAAW,YAAY,KAAK,WAAW,SAAS,QAAQ;AAChEA,sBAAAA,MAAI,aAAa;AAAA,UAChB,MAAM,CAAC,KAAK,WAAW,QAAQ;AAAA,UAC/B,SAAS;AAAA,SACT;AAAA,MACF;AAAA,IACA;AAAA,IACD,aAAa;AACZA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,aAAa,KAAK,QAAQ;AAAA,OAC/B;AAAA,IACD;AAAA,IACD,SAAS;AACRA,oBAAAA,MAAI,aAAa;AAAA,IAClB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5LA,GAAG,WAAW,eAAe;"}