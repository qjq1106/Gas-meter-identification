{"version":3,"file":"leftWindow.js","sources":["windows/leftWindow.vue","../../../../微信开发者工具/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovdGVzdFByb2plY3RzL1dlQ2hhdFByb2plY3RzL3Rlc3RQcm9qZWN0LTIv54eD5rCU5ZCO5Y-w566h55CG6Z2i5p2_L3dpbmRvd3MvbGVmdFdpbmRvdy52dWU"],"sourcesContent":["<template>\r\n\t<scroll-view class=\"sidebar\" scroll-y=\"true\">\r\n\t\t<uni-data-menu ref=\"menu\" :value=\"currentMenu\" :staticMenu=\"staticMenu\" collection=\"opendb-admin-menus\"\r\n\t\t\t:page-size=\"500\" :field=\"field\" where=\"enable==true\" orderby=\"sort asc\" active-text-color=\"#409eff\" @select=\"select\">\r\n\t\t</uni-data-menu>\r\n\t</scroll-view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapActions\r\n\t} from 'vuex'\r\n\timport config from '@/admin.config.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t...config.sideBar,\r\n\t\t\t\tfield: 'url as value, name as text, menu_id, parent_id, sort, icon, permission',\r\n\t\t\t\tcurrentMenu: '/'\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState('app', ['inited', 'navMenu', 'active']),\r\n\t\t\tuserInfo () {\r\n\t\t\t\treturn this.$uniIdPagesStore.store.userInfo\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\t\t\t// #ifdef H5\r\n\t\t\t$route: {\r\n\t\t\t\timmediate: true,\r\n\t\t\t\thandler(newRoute, oldRoute) {\r\n\t\t\t\t\tconst path = newRoute.fullPath\r\n\t\t\t\t\tif (path) {\r\n\t\t\t\t\t\tthis.currentMenu = this.splitFullPath(path)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\tuserInfo: {\r\n\t\t\t\t// immediate: true,\r\n\t\t\t\thandler(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\t// 当用户信息发生变化后，重新加载左侧menu\r\n\t\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\t\tthis.$refs.menu.load()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions({\r\n\t\t\t\tsetRoutes: 'app/setRoutes'\r\n\t\t\t}),\r\n\t\t\tselect(e, routes) {\r\n\t\t\t\tlet url = e.value\r\n\t\t\t\tif (!url) {\r\n\t\t\t\t\turl = this.active\r\n\t\t\t\t}\r\n\t\t\t\tthis.clickMenuItem(url)\r\n\t\t\t\tthis.setRoutes(routes)\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t// #ifdef VUE3\r\n\t\t\t\tuni.hideLeftWindow()\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tclickMenuItem(url) {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (url.indexOf('http') === 0) {\r\n\t\t\t\t\treturn window.open(url)\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// url 开头可用有 / ，也可没有\r\n\t\t\t\tif (url[0] !== '/' && url.indexOf('http') !== 0) {\r\n\t\t\t\t\turl = '/' + url\r\n\t\t\t\t}\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tif (url === \"/\") {\r\n\t\t\t\t\turl = config.index.url;\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t// TODO 后续要调整\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tcontent: '页面 ' + url + ' 跳转失败',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsplitFullPath(path) {\r\n\t\t\t\tif (!path) {\r\n\t\t\t\t\tpath = '/'\r\n\t\t\t\t}\r\n\t\t\t\treturn path.split('?')[0]\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.sidebar {\r\n\t\tposition: fixed;\r\n\t\t// top: var(--top-window-height); // useless\r\n\t\twidth: 240px;\r\n\t\theight: calc(100vh - (var(--top-window-height)));\r\n\t\tbox-sizing: border-box;\r\n\t\tborder-right: 1px solid darken($left-window-bg-color, 8%);\r\n\t\tbackground-color: $left-window-bg-color;\r\n\t\tpadding-bottom: 10px;\r\n\t}\r\n\t/* #ifdef H5 */\r\n\t.sidebar ::-webkit-scrollbar {\r\n\t\tdisplay: none;\r\n\t\t// scrollbar-width: thin;\r\n\t}\r\n\t/* #endif */\r\n\r\n\t.title {\r\n\t\tmargin-left: 5px;\r\n\t}\r\n</style>\r\n","import Component from 'E:/testProjects/WeChatProjects/testProject-2/燃气后台管理面板/windows/leftWindow.vue'\nwx.createComponent(Component)"],"names":["config","mapState","mapActions","uni"],"mappings":";;;AAcC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,GAAGA,aAAM,OAAC;AAAA,MACV,OAAO;AAAA,MACP,aAAa;AAAA,IACd;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,GAAGC,cAAAA,SAAS,OAAO,CAAC,UAAU,WAAW,QAAQ,CAAC;AAAA,IAClD,WAAY;AACX,aAAO,KAAK,iBAAiB,MAAM;AAAA,IACpC;AAAA,EACA;AAAA,EAED,OAAO;AAAA,IAYN,UAAU;AAAA;AAAA,MAET,QAAQ,QAAQ,QAAQ;AACvB,YAAI,QAAQ;AAEX,eAAK,UAAU,WAAW;AACzB,iBAAK,MAAM,KAAK,KAAK;AAAA,WACrB;AAAA,QACF;AAAA,MACD;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,GAAGC,yBAAW;AAAA,MACb,WAAW;AAAA,IACZ,CAAC;AAAA,IACD,OAAO,GAAG,QAAQ;AACjB,UAAI,MAAM,EAAE;AACZ,UAAI,CAAC,KAAK;AACT,cAAM,KAAK;AAAA,MACZ;AACA,WAAK,cAAc,GAAG;AACtB,WAAK,UAAU,MAAM;AAAA,IAMrB;AAAA,IACD,cAAc,KAAK;AAQlB,UAAI,IAAI,CAAC,MAAM,OAAO,IAAI,QAAQ,MAAM,MAAM,GAAG;AAChD,cAAM,MAAM;AAAA,MACb;AAEA,UAAI,QAAQ,KAAK;AAChB,cAAMF,aAAAA,OAAO,MAAM;AAAA,MACpB;AAGAG,oBAAAA,MAAI,WAAW;AAAA,QACd;AAAA,QACA,MAAM,MAAM;AACXA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAAS,QAAQ,MAAM;AAAA,YACvB,YAAY;AAAA,WACZ;AAAA,QACF;AAAA,OACA;AAAA,IACD;AAAA,IACD,cAAc,MAAM;AACnB,UAAI,CAAC,MAAM;AACV,eAAO;AAAA,MACR;AACA,aAAO,KAAK,MAAM,GAAG,EAAE,CAAC;AAAA,IACxB;AAAA,EACF;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;ACxGD,GAAG,gBAAgB,SAAS;"}