{"version":3,"file":"error.js","sources":["js_sdk/uni-admin/error.js"],"sourcesContent":["import store from '@/store'\r\nimport config from '@/admin.config.js'\r\n\r\n// #ifndef VUE3\r\nexport function initError(Vue) {\r\n     const debugOptions = config.navBar.debug\r\n     if (debugOptions && debugOptions.enable === true) {\r\n        const oldErrorHandler = Vue.config.errorHandler\r\n        Vue.config.errorHandler = function errorHandler(err, vm, info) {\r\n\t\t\tconsole.error(err)\r\n             const route = vm.$page && vm.$page.route\r\n             store.dispatch('error/add', {\r\n                 err: err.toString(),\r\n\t\t\t\t info,\r\n                 route,\r\n                 time: new Date().toLocaleTimeString()\r\n             })\r\n            return oldErrorHandler(err, vm, info)\r\n         }\r\n     }\r\n}\r\n// #endif\r\n\r\n// #ifdef VUE3\r\nexport function initError(app) {\r\n    const debugOptions = config.navBar.debug\r\n    if (debugOptions && debugOptions.enable === true) {\r\n        const oldErrorHandler = app.config.errorHandler\r\n        app.config.errorHandler = function errorHandler(err, vm, info) {\r\n\t\t\tconsole.error(err)\r\n            const route = vm.$page && vm.$page.route\r\n            store.dispatch('error/add', {\r\n                err: err.toString(),\r\n                info,\r\n                route,\r\n                time: new Date().toLocaleTimeString()\r\n            })\r\n            return oldErrorHandler && oldErrorHandler(err, vm, info)\r\n        }\r\n    }\r\n}\r\n// #endif\r\n"],"names":["config","uni","store"],"mappings":";;;;AAwBO,SAAS,UAAU,KAAK;AAC3B,QAAM,eAAeA,oBAAO,OAAO;AACnC,MAAI,gBAAgB,aAAa,WAAW,MAAM;AAC9C,UAAM,kBAAkB,IAAI,OAAO;AACnC,QAAI,OAAO,eAAe,SAAS,aAAa,KAAK,IAAI,MAAM;AACpEC,oBAAAA,MAAA,MAAA,SAAA,mCAAc,GAAG;AACR,YAAM,QAAQ,GAAG,SAAS,GAAG,MAAM;AACnCC,kBAAK,MAAC,SAAS,aAAa;AAAA,QACxB,KAAK,IAAI,SAAU;AAAA,QACnB;AAAA,QACA;AAAA,QACA,OAAM,oBAAI,KAAM,GAAC,mBAAoB;AAAA,MACrD,CAAa;AACD,aAAO,mBAAmB,gBAAgB,KAAK,IAAI,IAAI;AAAA,IAC1D;AAAA,EACJ;AACL;;"}