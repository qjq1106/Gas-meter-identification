{"version":3,"file":"opendb-app-list.js","sources":["js_sdk/validator/opendb-app-list.js"],"sourcesContent":["// 表单校验规则由 schema2code 生成，不建议直接修改校验规则，而建议通过 schema2code 生成, 详情: https://uniapp.dcloud.net.cn/uniCloud/schema\r\n\r\n\r\nconst validator = {\r\n\t\"appid\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\t\"required\": true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"format\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"label\": \"AppID\"\r\n\t},\r\n\t\"name\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\t\"required\": true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"format\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"label\": \"应用名称\"\r\n\t},\r\n\t\"app_type\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\t\"required\": true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"format\": \"int\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"label\": \"应用类型\"\r\n\t},\r\n\t\"icon_url\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\"format\": \"string\"\r\n\t\t}],\r\n\t\t\"label\": \"应用图标\"\r\n\t},\r\n\t\"introduction\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\"format\": \"string\"\r\n\t\t}],\r\n\t\t\"label\": \"应用简介\"\r\n\t},\r\n\t\"description\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\"format\": \"string\"\r\n\t\t}],\r\n\t\t\"label\": \"应用描述\"\r\n\t},\r\n\t\"screenshot\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\"format\": \"array\"\r\n\t\t}],\r\n\t\t\"label\": \"应用截图\"\r\n\t},\r\n\t\"create_date\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\"format\": \"timestamp\"\r\n\t\t}],\r\n\t\t\"label\": \"发行时间\"\r\n\t}\r\n}\r\n\r\nfunction filterToWhere(filter, command) {\r\n\tlet where = {}\r\n\tfor (let field in filter) {\r\n\t\tlet {\r\n\t\t\ttype,\r\n\t\t\tvalue\r\n\t\t} = filter[field]\r\n\t\tswitch (type) {\r\n\t\t\tcase \"search\":\r\n\t\t\t\tif (typeof value === 'string' && value.length) {\r\n\t\t\t\t\twhere[field] = new RegExp(value)\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"select\":\r\n\t\t\t\tif (value.length) {\r\n\t\t\t\t\tlet selectValue = []\r\n\t\t\t\t\tfor (let s of value) {\r\n\t\t\t\t\t\tselectValue.push(command.eq(s))\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhere[field] = command.or(selectValue)\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"range\":\r\n\t\t\t\tif (value.length) {\r\n\t\t\t\t\tlet gt = value[0]\r\n\t\t\t\t\tlet lt = value[1]\r\n\t\t\t\t\twhere[field] = command.and([command.gte(gt), command.lte(lt)])\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"date\":\r\n\t\t\t\tif (value.length) {\r\n\t\t\t\t\tlet [s, e] = value\r\n\t\t\t\t\tlet startDate = new Date(s)\r\n\t\t\t\t\tlet endDate = new Date(e)\r\n\t\t\t\t\twhere[field] = command.and([command.gte(startDate), command.lte(endDate)])\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"timestamp\":\r\n\t\t\t\tif (value.length) {\r\n\t\t\t\t\tlet [startDate, endDate] = value\r\n\t\t\t\t\twhere[field] = command.and([command.gte(startDate), command.lte(endDate)])\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn where\r\n}\r\nconst enumConverter = {}\r\nconst mpPlatform = {\r\n\t'mp_weixin': '微信小程序',\r\n\t'mp_alipay': '支付宝小程序',\r\n\t'mp_baidu': '百度小程序',\r\n\t'mp_toutiao': '字节小程序',\r\n\t'mp_qq': 'QQ小程序',\r\n\t'mp_dingtalk': '钉钉小程序',\r\n\t'mp_kuaishou': '快手小程序',\r\n\t'mp_lark': '飞书小程序',\r\n\t'mp_jd': '京东小程序',\r\n\t'quickapp': '快应用'\r\n}\r\n\r\nexport {\r\n\tenumConverter,\r\n\tvalidator,\r\n\tfilterToWhere,\r\n\tmpPlatform\r\n}\r\n"],"names":[],"mappings":"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"}